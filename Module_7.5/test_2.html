<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meal Finder</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f4f4f4;
      }

      .search-bar {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }

      .search-bar input {
        padding: 10px;
        width: 300px;
        font-size: 16px;
      }

      .search-bar button {
        padding: 10px;
        font-size: 16px;
        margin-left: 10px;
        cursor: pointer;
      }

      .meal-details {
        background: #fff;
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      .meal-details img {
        max-width: 100%;
        border-radius: 8px;
      }

      .meal-list {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }

      .meal-card {
        background: white;
        padding: 10px;
        width: 200px;
        text-align: center;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      }

      .meal-card:hover {
        transform: scale(1.05);
      }

      .meal-card img {
        width: 100%;
        border-radius: 8px;
      }

      .meal-card h4 {
        margin: 10px 0 0 0;
      }
    </style>
  </head>
  <body>
    <div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="Find your favorite food..."
      />
      <button onclick="searchMeals()">Search</button>
    </div>

    <div id="mealDetails" class="meal-details" style="display: none"></div>

    <div class="meal-list" id="mealList"></div>

    <script>
      async function searchMeals() {
        const query = document.getElementById('searchInput').value;
        if (!query) return;

        const res = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${query}`);
        const data = await res.json();
        const meals = data.meals;

        const mealList = document.getElementById('mealList');
        mealList.innerHTML = '';

        if (!meals) {
          mealList.innerHTML = '<p>No meals found.</p>';
          return;
        }

        meals.forEach(meal => {
          const mealCard = document.createElement('div');
          mealCard.className = 'meal-card';
          mealCard.innerHTML = `
            <img src="${meal.strMealThumb}" alt="${meal.strMeal}" />
            <h4>${meal.strMeal}</h4>
          `;
          mealCard.addEventListener('click', () => showMealDetails(meal.idMeal));
          mealList.appendChild(mealCard);
        });
      }

      <!-- async function showMealDetails(id) {
        const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
        const data = await res.json();
        const meal = data.meals[0];

        const detailContainer = document.getElementById('mealDetails');
        detailContainer.style.display = 'block';
        detailContainer.innerHTML = `
          <h2>${meal.strMeal}</h2>
          <img src="${meal.strMealThumb}" alt="${meal.strMeal}">
          <p><strong>Category:</strong> ${meal.strCategory}</p>
          <p><strong>Area:</strong> ${meal.strArea}</p>
          <p><strong>Instructions:</strong> ${meal.strInstructions.substring(0, 300)}...</p>
          <a href="${meal.strYoutube}" target="_blank">▶️ Watch on YouTube</a>
        `;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } -->
      function showMealDetails(id) {
          const mealDetails = document.getElementById("mealDetails");

          fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`)
            .then(res => res.json())
            .then(data => {
              const meal = data.meals[0];

              // Get ingredients
              const ingredients = [];
              for (let i = 1; i <= 20; i++) {
                const ing = meal[`strIngredient${i}`];
                const measure = meal[`strMeasure${i}`];
                if (ing && ing.trim() !== "") {
                  ingredients.push(`${measure} ${ing}`);
                }
              }

              // Show details
              mealDetails.style.display = "block";
              mealDetails.innerHTML = `
                <div class="mx-auto mb-4 p-3 shadow-sm bg-white rounded" style="max-width: 600px;">
                  <img src="${meal.strMealThumb}" class="img-fluid rounded mb-3" alt="${meal.strMeal}">
                  <h3 class="text-center">${meal.strMeal}</h3>
                  <p><strong>Category:</strong> ${meal.strCategory}</p>
                  <p><strong>Area:</strong> ${meal.strArea}</p>
                  <h5>Ingredients:</h5>
                  <ul class="list-group list-group-flush mb-3">
                    ${ingredients.map(ing => `<li class="list-group-item">${ing}</li>`).join("")}
                  </ul>
                  <div class="text-center">
                    <a href="${meal.strYoutube}" target="_blank" class="btn btn-danger">Watch on YouTube</a>
                  </div>
                </div>
              `;

              mealDetails.scrollIntoView({ behavior: "smooth", block: "start" });
            });
        }
    </script>
  </body>
</html>
